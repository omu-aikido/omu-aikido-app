---
import { default as Layout } from "@/src/layouts/layout.astro"
import AddRecordForm from "@/rr7/components/component/AddRecordForm.tsx"

const user = await Astro.locals.currentUser()
const userProfile = Astro.locals.profile
if (!user || !userProfile) {
  return Astro.redirect("/sign-in")
}

const date = (new URL(Astro.request.url).searchParams.get("date")) ?? undefined
const period = new URL(Astro.request.url).searchParams.get("period") ?? undefined
---

<Layout title="自動記録">
  <AddRecordForm initialDate={date} initialPeriod={period} />
</Layout>
